<!DOCTYPE html>
<html>
<head>
	<title>Page Title</title>
	<link href="MainStyle.css" rel="stylesheet" type="text/css"/>
	<script src="/Libs/map.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.50.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.50.0/mapbox-gl.css' rel='stylesheet' />
</head>
<body>
	<div id='container'>
		<div id='header'>
			<span id='pageTitle'>JRJ Sports Analytics</span>
		</div>
		<div id='menu'>
			<button type="button" id='slideOut' onClick = "TogglesidePanel('out');">Slideout!</button>
			<button type="button" id='slideOut' onClick = "TogglesidePanel('in');">SlideIn!</button>
		</div>
		<div id='sidePanel'>
		This is where the player information and other text and team informatoin will go and it will only be displayed based on the team the player clicked
		</div>
		<div id='mainMap'>
		</div>
		<div id='footer'>
			<span id='zoom'> This is one footer</span>
			<span id='location'> This is another footer</span>
		</div>
	</div>
	<script>
		mapboxgl.accessToken = 'pk.eyJ1IjoiZ3Jvc3MxanciLCJhIjoiY2pkeXlhYjNxNGZjbTJ3cXB2ODg1OGJiYiJ9.KJO8FL7aEC-9SKfqGUdbjQ';
		var map1 = new mapboxgl.Map({
			container: 'mainMap',
			style: 'mapbox://styles/mapbox/dark-v9',
			zoom: 4,
			center: [-98.5795,38],
		});
		var teams;
		var zoom=parseFloat(map1.getZoom()*8).toFixed(0)+'px';
		$.getJSON("Data/Nfl_Teams.json",function(json){
			teams=json.features;
			$.each(json.features,function(i,feature){
				var el = document.createElement('div');
				el.style.backgroundImage = "url("+feature.properties.IMAGE+")";
				el.className = "teamMarker";
				el.style.backgroundSize= "contain";
				el.style.width=zoom;
				el.style.height=zoom;
				el.style.backgroundRepeat="no-repeat";
				el.style.cursor="pointer";
				// make a marker for each feature and add to the map
				new mapboxgl.Marker(el)
				.setLngLat(feature.geometry.coordinates)
				.addTo(map1);
			});
		});
		map1.on('zoom',function(){
			document.getElementById("zoom").innerHTML="Zoom"+parseFloat(map1.getZoom()).toFixed(1); 
			zoom=parseFloat(map1.getZoom()*8).toFixed(0)+'px';
			console.log(zoom);
			var markers = document.getElementsByClassName('teamMarker');
			console.log(markers.length);
			console.log(zoom);
			for(i=0; i<markers.length; i++) {
				markers[i].style.width=zoom;
				markers[i].style.height=zoom;
			}
		});
		//function to slide the panel
		function TogglesidePanel(_direction){
			if(_direction=="out"){
				$("#mainMap").animate({width:"85%"},600)
				$("#sidePanel").animate({width:"15%"},600)
			}else{
				$("#sidePanel").animate({width:"0%"},600)
				$("#mainMap").animate({width:"100%"},600)
			}
		};
	</script>
</body>
</html>





